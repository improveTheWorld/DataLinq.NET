# NET-006: YAML List Deserialization Fails for Record Types

| Field | Value |
|-------|-------|
| **Product** | DataLinq.NET |
| **Component** | Data.Read (YAML) |
| **Severity** | ðŸ”´ Critical |
| **Status** | âœ… Fixed |
| **Found** | 2026-02-07 |
| **Fixed** | 2026-02-07 |

## Description
Reading a YAML list of items into C# `record` types failed with `InvalidDataException` wrapping a `YamlException`. The `DefaultObjectFactory` cannot instantiate `record` types because they lack a parameterless constructor.

## Root Cause
`YamlDotNet`'s `DefaultObjectFactory` requires a parameterless constructor to create objects before populating properties. C# records use primary constructors with no parameterless overload by default.

## Fix
When `T` has no parameterless constructor (detected via `ObjectMaterializer.TryGetParameterlessFactory<T>`), the YAML reader now:
1. Deserializes to `Dictionary<string, object>` instead of `T`
2. Converts string values to constructor parameter types via `ConvertYamlValues<T>` 
3. Delegates to `ObjectMaterializer.Create<T>(schema, values)` for record construction

This approach reuses the existing `ObjectMaterializer` infrastructure which already handles records via primary constructor matching.

## Files Changed
- `DataLinq.Data.Read/Read.Yaml.cs` â€” Added record-aware deserialization path (async + sync)
- `UnitTests/DataLinq.Data.Tests/AdditionalReadTests.cs` â€” Removed `// BUG:` annotation

## Test Reference
`UnitTests/DataLinq.Data.Tests/AdditionalReadTests.cs` â†’ `Yaml_BasicList_ReadsAllItems`, `YamlSync_BasicList_ReadsAllItems`

## Limitations
See [`ObjectMaterializer-Limitations.md`](../ObjectMaterializer-Limitations.md) for known limitations of the current materialization approach, targeted for refactoring in v2.x.
