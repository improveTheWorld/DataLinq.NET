# NET-007: UnifiedStream Allows Mutation During Active Enumeration

| Field | Value |
|-------|-------|
| **Product** | DataLinq.NET |
| **Component** | UnifiedStream (Framework) |
| **Severity** | ðŸŸ¡ Medium |
| **Status** | ðŸ”´ Open |
| **Found** | 2026-02-07 |

## Description
`UnifiedStream<T>` does not guard against concurrent modification during active enumeration. Calling `Unify()` or `Unlisten()` while an `await foreach` is draining the stream should throw `InvalidOperationException`, but instead succeeds silently. This is a thread-safety issue that could lead to data corruption or missed items.

## Test Reference
`UnitTests/DataLinq.Core.Tests/AsyncEnumerableTests.cs` â†’ `MutatingAfterEnumerationStarts_Throws`

## Expected vs Actual
- **Expected:** `InvalidOperationException` thrown when calling `Unify()` or `Unlisten()` during active enumeration
- **Actual:** No exception â€” mutation succeeds silently

## Root Cause
`UnifiedStream<T>` lacks an enumeration-active flag or concurrent modification check. The internal source collection is unguarded.
